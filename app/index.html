<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' ws: blob: data:; style-src 'self' 'unsafe-inline'; img-src 'self' blob: data:; media-src 'self' blob: data:;"> <title>Natla</title>
    <link rel="stylesheet" href="main.css">
    <style>        
        /* Yeni Ãœst Bar DÃ¼zeni (Bildirim + Ä°sim) */
        .status-name-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 5px;
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }

        /* Sabit Boyutlu Kontroller */
        .fixed-room-select {
            width: 190px; /* Sabit GeniÅŸlik */
            flex-shrink: 0;
            cursor: pointer;
            background: var(--input-bg);
            color: var(--text-main);
            border: 1px solid var(--input-border);
        }

        .fixed-join-btn {
            width: 90px; /* Sabit GeniÅŸlik */
            flex-shrink: 0;
        }

        /* DiÄŸer YardÄ±mcÄ± Stiller */
        .slider-group { display: flex; align-items: center; justify-content: space-between; margin-bottom: 5px; width: 100%; }
        .slider-group label { font-size: 14px; font-weight: bold; width: 100px; color: var(--text-main); }
        .slider-group input { flex: 1; cursor: pointer; }
        .slider-val { font-size: 12px; width: 35px; text-align: right; font-family: monospace; color: var(--text-muted); }
        .device-select { flex: 1; padding: 5px; border-radius: 4px; border: 1px solid var(--input-border); background: var(--input-bg); color: var(--text-main); outline: none; max-width: 100%; font-size: 14px; }
        #users::-webkit-scrollbar, #chatHistory::-webkit-scrollbar { width: 6px; }
        #users::-webkit-scrollbar-thumb, #chatHistory::-webkit-scrollbar-thumb { background: #555; border-radius: 3px; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="header-row">
        <h1>Natla</h1> 
        <button id="btnTheme" title="TemayÄ± DeÄŸiÅŸtir">â˜€ï¸</button>
    </div>

    <div class="status-name-row" style="position: relative;">
        <div id="roomPreview" style="font-size: 12px; color: #aaa;  flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 5px; pointer-events: none;">
            Sunucuya baÄŸlanÄ±lÄ±yor...
        </div>

        <input type="text" id="username" placeholder="AdÄ±nÄ±z" class="compact-input">
    </div>
    
    <div id="status" style="display:none;"></div> 
    
    <div class="join-row" style="display: flex; gap: 5px;">
        <select id="roomSelect" class="compact-input fixed-room-select">
            <option value="genel">Genel</option>
            <option value="FBI">FBI</option>
            <option value="2">1</option>
            <option value="1">2</option>
        </select>
        
        <button id="btnConnect" class="fixed-join-btn">KatÄ±l</button>

        <div id="activeControls" style="display: none; flex: 1; gap: 5px; justify-content: flex-end;">
            <button id="btnToggleMic" title="Mikrofonu AÃ§/Kapat" style="flex:1;">ğŸ¤</button>
            <button id="btnToggleSound" title="Sesi AÃ§/Kapat" style="flex:1;">ğŸ”Š</button>
            <button id="btnDisconnect" title="AyrÄ±l" style="flex:1;">âœ–</button>
        </div>
    </div>

    <div id="settingsPanel">
        <div class="slider-group">
            <label>ğŸ¤ GiriÅŸ:</label>
            <select id="micSelect" class="device-select">
                <option value="">VarsayÄ±lan Mikrofon</option>
            </select>
        </div>
        <div class="slider-group">
            <label>ğŸ§ Ã‡Ä±kÄ±ÅŸ:</label>
            <select id="speakerSelect" class="device-select">
                <option value="">VarsayÄ±lan HoparlÃ¶r</option>
            </select>
        </div>
        <div class="slider-group">
            <label>ğŸ™ï¸ Mic Ses:</label>
            <input type="range" id="micVolume" min="0" max="200" value="100">
            <span id="micVal" class="slider-val">100%</span>
        </div>
        <div class="slider-group">
            <label>ğŸ§ Genel Ses:</label>
            <input type="range" id="masterVolume" min="0" max="100" value="100">
            <span id="masterVal" class="slider-val">100%</span>
        </div>
    </div>
    
    <div id="error-log"></div>

    <div id="users">
        <div id="soundpadArea">
            <button class="soundpad-btn" >1</button>
            <button class="soundpad-btn" >2</button>
            <button class="soundpad-btn" >3</button>
            <button class="soundpad-btn" >4</button>
            <button class="soundpad-btn" >5</button>
            <button class="soundpad-btn" >6</button>
            <button class="soundpad-btn" >7</button>
            <button class="soundpad-btn" >8</button>
            <button class="soundpad-btn" >9</button>
            <button class="soundpad-btn" >10</button>
            <button class="soundpad-btn" >11</button>
            <button class="soundpad-btn" >12</button>
            <button class="soundpad-btn" >13</button>
            <button class="soundpad-btn" >14</button>
            <button class="soundpad-btn" >15</button>
            <button class="soundpad-btn" >16</button>
        </div>

        <div class="user-list-header">
            <h3>BaÄŸlÄ± KullanÄ±cÄ±lar</h3>
            <button id="btnShareScreen" title="Ekran PaylaÅŸ" disabled>
                ğŸ–¥ï¸ PaylaÅŸ
            </button>
        </div>
        <div id="userList"></div>
    </div>
</div>

<div class="chat-area">
    <div id="chatHistory">
        <div class="message received" style="align-self:center; background:var(--input-bg); border-bottom-left-radius: 12px; margin-top: auto;">
            Odaya hoÅŸ geldiniz!
        </div>
    </div>
    
    <div class="chat-input-container">
        <input type="file" id="fileInput" style="display:none" />
        <input type="text" id="msgInput" placeholder="Bir mesaj yaz..." disabled>
        <button id="btnAttach">ğŸ“</button>
        <button id="btnSend" disabled>></button>

    </div>
</div>

<div id="audioContainer"></div>

<div id="streamModal" class="stream-modal" style="display: none;">
    <div class="stream-header">
        <span id="streamerName">YayÄ±n</span>
        <button id="btnCloseStream">Kapat âœ–</button>
    </div>
    <div class="stream-content">
        <video id="largeVideoPlayer" autoplay playsinline></video>
    </div>
</div>

<div id="passwordModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; justify-content: center; align-items: center; flex-direction: column;">
    <div style="background: #2b2b2b; padding: 30px; border-radius: 12px; border: 1px solid #444; text-align: left; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 400px;">
        <h3 style="color: #fff; margin-bottom: 20px; font-family: sans-serif; text-align: center;">âš™ï¸ Sunucu AyarlarÄ±</h3>
        
        <label style="color: #bbb; font-size: 12px; display:block; margin-bottom:5px;">Sunucu Adresi (ws://...)</label>
        <input type="text" id="serverInput" value="" placeholder="ws://ip_adresi:port" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #555; background: #1a1a1a; color: white; margin-bottom: 15px; outline: none;">

        <label style="color: #bbb; font-size: 12px; display:block; margin-bottom:5px;">EriÅŸim AnahtarÄ±</label>
        <input type="password" id="keyInput" placeholder="Sunucu Åifresi..." style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #555; background: #1a1a1a; color: white; margin-bottom: 20px; outline: none;">
        
        <button id="btnSaveKey" style="background: #2ecc71; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%;">BAÄLAN</button>
    </div>
</div>

<script src="fileTransfer.js"></script>
<script src="renderer.js"></script>
</body>
</html>